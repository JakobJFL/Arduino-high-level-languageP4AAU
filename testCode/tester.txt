proc setup() {ledHandler();}

proc loop() {}

func Pwm sensorHandler() {
	if (notInitialized()) {
		initializeSensor();
	}
	return checkSensor(readSensor());
	proc initializeSensor() {}
	func Bool notInitialized() {}
	func Pwm readSensor() {}
	func Pwm checkSensor(Pwm input) {}
}

proc ledHandler() {
	proc checkSensor() {
		if (sensorHandler() == 1) {blink(true);}
		if (sensorHandler() == 2) {fadeUp();}
		if (sensorHandler() == 3) {fadeDown();}
		checkSensor();
	}
	
	proc blink(Bool shouldBlinkFast) { 
		if (shouldBlinkFast) {blinkFast();}
		else {blinkSlow();}
		proc blinkFast() {}
		proc blinkSlow() {}
	}
	proc fadeUp() {}
	proc fadeDown() {}
}